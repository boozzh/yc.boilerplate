
【ERR】2021-05-15 13:09:51.131
#Msg#Autofac.Core.DependencyResolutionException: An exception was thrown while activating YC.ServiceWebApi.DefaultTenant.
 ---> Autofac.Core.DependencyResolutionException: An exception was thrown while invoking the constructor 'Void .ctor(Microsoft.AspNetCore.Http.IHttpContextAccessor, YC.Core.Cache.ICacheManager)' on type 'DefaultTenant'.
 ---> System.Exception: 错误信息：Token 无效，请从新获取Token！
   at YC.ServiceWebApi.Extensions.ValidateTokenExtenstions.<>c__DisplayClass0_0.<ValidateToken>b__0(Dictionary`2 load) in H:\Code\giteeCode\MicroServicePro\src\BasicAppLayer\YC.ServiceWebApi\Extensions\ValidateTokenExtenstions.cs:line 51
   at YC.Core.TokenContext.Validate(String encodeJwt, Func`2 validatePayLoad) in H:\Code\giteeCode\MicroServicePro\src\BasicLayer\YC.Core\TokenContext\TokenContext.cs:line 114
   at YC.ServiceWebApi.Extensions.ValidateTokenExtenstions.ValidateToken(String token, IHttpContextAccessor httpContextAccessor, ICacheManager cacheManager) in H:\Code\giteeCode\MicroServicePro\src\BasicAppLayer\YC.ServiceWebApi\Extensions\ValidateTokenExtenstions.cs:line 19
   at YC.ServiceWebApi.DefaultTenant..ctor(IHttpContextAccessor httpContextAccessor, ICacheManager cacheManager) in H:\Code\giteeCode\MicroServicePro\src\BasicAppLayer\YC.ServiceWebApi\Tenant\DefaultTenant.cs:line 75
   at lambda_method302(Closure , Object[] )
   at Autofac.Core.Activators.Reflection.BoundConstructor.Instantiate()
   --- End of inner exception stack trace ---
   at Autofac.Core.Activators.Reflection.BoundConstructor.Instantiate()
   at Autofac.Core.Activators.Reflection.ReflectionActivator.ActivateInstance(IComponentContext context, IEnumerable`1 parameters)
   at Autofac.Core.Activators.Reflection.ReflectionActivator.<ConfigurePipeline>b__11_0(ResolveRequestContext ctxt, Action`1 next)
   at Autofac.Core.Resolving.Pipeline.ResolvePipelineBuilder.<>c__DisplayClass14_0.<BuildPipeline>b__1(ResolveRequestContext ctxt)
   at Autofac.Core.Resolving.Middleware.DisposalTrackingMiddleware.Execute(ResolveRequestContext context, Action`1 next)
   at Autofac.Core.Resolving.Pipeline.ResolvePipelineBuilder.<>c__DisplayClass14_0.<BuildPipeline>b__1(ResolveRequestContext ctxt)
   at Autofac.Builder.RegistrationBuilder`3.<>c__DisplayClass41_0.<PropertiesAutowired>b__0(ResolveRequestContext ctxt, Action`1 next)
   at Autofac.Core.Resolving.Pipeline.ResolvePipelineBuilder.<>c__DisplayClass14_0.<BuildPipeline>b__1(ResolveRequestContext ctxt)
   at Autofac.Core.Resolving.Middleware.ActivatorErrorHandlingMiddleware.Execute(ResolveRequestContext context, Action`1 next)
   --- End of inner exception stack trace ---
   at Autofac.Core.Resolving.Middleware.ActivatorErrorHandlingMiddleware.Execute(ResolveRequestContext context, Action`1 next)
   at Autofac.Core.Resolving.Pipeline.ResolvePipelineBuilder.<>c__DisplayClass14_0.<BuildPipeline>b__1(ResolveRequestContext ctxt)
   at Autofac.Core.Resolving.Pipeline.ResolvePipelineBuilder.<>c__DisplayClass14_0.<BuildPipeline>b__1(ResolveRequestContext ctxt)
   at Autofac.Core.Resolving.Middleware.SharingMiddleware.<>c__DisplayClass5_0.<Execute>b__0()
   at Autofac.Core.Lifetime.LifetimeScope.CreateSharedInstance(Guid id, Func`1 creator)
   at Autofac.Core.Lifetime.LifetimeScope.CreateSharedInstance(Guid primaryId, Nullable`1 qualifyingId, Func`1 creator)
   at Autofac.Core.Resolving.Middleware.SharingMiddleware.Execute(ResolveRequestContext context, Action`1 next)
   at Autofac.Core.Resolving.Pipeline.ResolvePipelineBuilder.<>c__DisplayClass14_0.<BuildPipeline>b__1(ResolveRequestContext ctxt)
   at Autofac.Core.Resolving.Pipeline.ResolvePipelineBuilder.<>c__DisplayClass14_0.<BuildPipeline>b__1(ResolveRequestContext ctxt)
   at Autofac.Core.Resolving.Middleware.CircularDependencyDetectorMiddleware.Execute(ResolveRequestContext context, Action`1 next)
   at Autofac.Core.Resolving.Pipeline.ResolvePipelineBuilder.<>c__DisplayClass14_0.<BuildPipeline>b__1(ResolveRequestContext ctxt)
   at Autofac.Core.Resolving.ResolveOperation.GetOrCreateInstance(ISharingLifetimeScope currentOperationScope, ResolveRequest request)
   at Autofac.Core.Resolving.ResolveOperation.ExecuteOperation(ResolveRequest request)
   at Autofac.Core.Resolving.ResolveOperation.Execute(ResolveRequest request)
   at Autofac.Core.Lifetime.LifetimeScope.ResolveComponent(ResolveRequest request)
   at Autofac.ResolutionExtensions.TryResolveService(IComponentContext context, Service service, IEnumerable`1 parameters, Object& instance)
   at Autofac.ResolutionExtensions.ResolveOptionalService(IComponentContext context, Service service, IEnumerable`1 parameters)
   at Autofac.ResolutionExtensions.ResolveOptional(IComponentContext context, Type serviceType, IEnumerable`1 parameters)
   at Autofac.ResolutionExtensions.ResolveOptional(IComponentContext context, Type serviceType)
   at Autofac.Extensions.DependencyInjection.AutofacServiceProvider.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.GetService(IServiceProvider sp, Type type, Type requiredBy, Boolean isDefaultParameterRequired)
   at lambda_method547(Closure , IServiceProvider , Object[] )
   at Microsoft.AspNetCore.Mvc.TypeFilterAttribute.CreateInstance(IServiceProvider serviceProvider)
   at Microsoft.AspNetCore.Mvc.Filters.DefaultFilterProvider.ProvideFilter(FilterProviderContext context, FilterItem filterItem)
   at Microsoft.AspNetCore.Mvc.Filters.DefaultFilterProvider.OnProvidersExecuting(FilterProviderContext context)
   at Microsoft.AspNetCore.Mvc.Filters.FilterFactory.CreateUncachedFiltersCore(IFilterProvider[] filterProviders, ActionContext actionContext, List`1 filterItems)
   at Microsoft.AspNetCore.Mvc.Filters.FilterFactory.GetAllFilters(IFilterProvider[] filterProviders, ActionContext actionContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvokerCache.GetCachedResult(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvokerProvider.OnProvidersExecuting(ActionInvokerProviderContext context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionInvokerFactory.CreateInvoker(ActionContext actionContext)
   at Microsoft.AspNetCore.Mvc.Routing.ActionEndpointFactory.<>c__DisplayClass7_0.<CreateRequestDelegate>b__0(HttpContext context)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.Invoke(HttpContext httpContext)
--- End of stack trace from previous location ---
   at YC.ServiceWebApi.Middleware.ExceptionMiddleware.Invoke(HttpContext context) in H:\Code\giteeCode\MicroServicePro\src\BasicAppLayer\YC.ServiceWebApi\Middleware\ExceptionMiddleware.cs:line 35
#Pro #{"SourceContext":"YC.ServiceWebApi.Middleware.ExceptionMiddleware","RequestId":"0HM8NBU9832L3:00000003","RequestPath":"/api/SysDataDictionary/GetSysDataDictionaryList","ConnectionId":"0HM8NBU9832L3"}
#Exc#--------------------------------------------------
【ERR】2021-05-15 13:14:53.733
#Msg#System.Exception: 错误信息：审计日志拦截返回值转换Json失败！System.InvalidCastException: Unable to cast object of type 'YC.Core.ApiResult`1[YC.ApplicationService.UserDto]' to type 'YC.Core.ApiResult`1[System.Object]'.
   at YC.ServiceWebApi.Filter.AOPActionFilterAttribute.OnActionExecuted(ActionExecutedContext context) in H:\Code\giteeCode\MicroServicePro\src\BasicAppLayer\YC.ServiceWebApi\Filter\AOPActionFilterAttribute.cs:line 75
   at YC.ServiceWebApi.Filter.AOPActionFilterAttribute.OnActionExecuted(ActionExecutedContext context) in H:\Code\giteeCode\MicroServicePro\src\BasicAppLayer\YC.ServiceWebApi\Filter\AOPActionFilterAttribute.cs:line 97
   at Microsoft.AspNetCore.Mvc.Filters.ActionFilterAttribute.OnActionExecutionAsync(ActionExecutingContext context, ActionExecutionDelegate next)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|24_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at YC.ServiceWebApi.Middleware.ExceptionMiddleware.Invoke(HttpContext context) in H:\Code\giteeCode\MicroServicePro\src\BasicAppLayer\YC.ServiceWebApi\Middleware\ExceptionMiddleware.cs:line 35
#Pro #{"SourceContext":"YC.ServiceWebApi.Middleware.ExceptionMiddleware","RequestId":"0HM8NC10G987G:00000003","RequestPath":"/api/Identity/GetTokenByLogin","ConnectionId":"0HM8NC10G987G"}
#Exc#--------------------------------------------------
【ERR】2021-05-15 13:26:47.230
#Msg#System.Exception: 错误信息：审计日志拦截返回值处理失败！Newtonsoft.Json.JsonSerializationException: Error converting value True to type 'YC.Core.ApiResult`1[System.Object]'. Path 'State', line 1, position 13.
 ---> System.ArgumentException: Could not cast or convert from System.Boolean to YC.Core.ApiResult`1[System.Object].
   at Newtonsoft.Json.Utilities.ConvertUtils.EnsureTypeAssignable(Object value, Type initialType, Type targetType)
   at Newtonsoft.Json.Utilities.ConvertUtils.ConvertOrCast(Object initialValue, CultureInfo culture, Type targetType)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.EnsureType(JsonReader reader, Object value, CultureInfo culture, JsonContract contract, Type targetType)
   --- End of inner exception stack trace ---
   at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.EnsureType(JsonReader reader, Object value, CultureInfo culture, JsonContract contract, Type targetType)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.Deserialize(JsonReader reader, Type objectType, Boolean checkAdditionalContent)
   at Newtonsoft.Json.JsonSerializer.DeserializeInternal(JsonReader reader, Type objectType)
   at Newtonsoft.Json.JsonSerializer.Deserialize(JsonReader reader, Type objectType)
   at Newtonsoft.Json.Linq.JToken.ToObject(Type objectType, JsonSerializer jsonSerializer)
   at Newtonsoft.Json.Linq.JToken.ToObject(Type objectType)
   at Newtonsoft.Json.Linq.JToken.ToObject[T]()
   at YC.Common.ShareUtils.JsonUtils.GetOjectByJsonKey[T](String Json, String key) in H:\Code\giteeCode\MicroServicePro\src\BasicLayer\YC.Common\ShareUtils\JsonUtils.cs:line 109
   at YC.ServiceWebApi.Filter.AOPActionFilterAttribute.OnActionExecuted(ActionExecutedContext context) in H:\Code\giteeCode\MicroServicePro\src\BasicAppLayer\YC.ServiceWebApi\Filter\AOPActionFilterAttribute.cs:line 75
   at YC.ServiceWebApi.Filter.AOPActionFilterAttribute.OnActionExecuted(ActionExecutedContext context) in H:\Code\giteeCode\MicroServicePro\src\BasicAppLayer\YC.ServiceWebApi\Filter\AOPActionFilterAttribute.cs:line 97
   at Microsoft.AspNetCore.Mvc.Filters.ActionFilterAttribute.OnActionExecutionAsync(ActionExecutingContext context, ActionExecutionDelegate next)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|24_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at YC.ServiceWebApi.Middleware.ExceptionMiddleware.Invoke(HttpContext context) in H:\Code\giteeCode\MicroServicePro\src\BasicAppLayer\YC.ServiceWebApi\Middleware\ExceptionMiddleware.cs:line 35
#Pro #{"SourceContext":"YC.ServiceWebApi.Middleware.ExceptionMiddleware","RequestId":"0HM8NC7SVB69H:00000003","RequestPath":"/api/Identity/GetTokenByLogin","ConnectionId":"0HM8NC7SVB69H"}
#Exc#--------------------------------------------------